<!DOCTYPE html>
<html>
<head>
    <title>Mandelbrot</title>
    <script src="mandelbrot.js" type="text/javascript"></script>
</head>
 
<body onload="Mandelbrot()">
    <h1>Mandelbrot</h1>
    Click on canvas to change boxing (autozoom).<br/>
    First click set top-left corner, second click set bottom-right corner (and so on).<br/>
    Then click on "Generate" to see result or "reset" to get default values.<br/><br/>
    
    <form id="calcdata" onsubmit="javascript:Mandelbrot(); return false;">
        <table>
            <tr>
                <td>xmin =</td>
                <td><input name="xmin" type="text" size="10" value="-2"></td>
                <td>xmax =</td>
                <td><input name="xmax" type="text" size="10" value="1"></td>
            </tr>
            <tr>
                <td>ymin =</td>
                <td><input name="ymin" type="text" size="10" value="-1"></td>
                <td>ymax =</td>
                <td><input name="ymax" type="text" size="10" value="1"></td>
            </tr>
        </table>
        <p>iterations =
            <input name="iterations" type="text" size="10" value="1000"></p>
            <p>
                <input type="submit" value="Generate">
                <input type="reset" value="Reset">
            </p>
        </form>
 
        <canvas id="mandelimage" width="900" height="600">
            Mettre votre navigateur Ã  jour pour supporter html5 et canvas
        </canvas>
        
        <script>
            canvas = document.getElementById('mandelimage');
            width = canvas.width;
            height = canvas.height;
            canvas.addEventListener("click", canvas_onClick, false);
            cd = document.getElementById('calcdata');
            first_click = true;
            
            function canvas_onClick(event) {
                x = event.x - canvas.offsetLeft;
                y = event.y - canvas.offsetTop;
                
                x = xmin + (xmax - xmin) * x / (width - 1);
                y = ymin + (ymax - ymin) * y / (height - 1);
                
                if (first_click) {
                    cd.xmin.value = x;
                    cd.ymin.value = y;
                    first_click = false;
                } else {
                    cd.xmax.value = x;
                    cd.ymax.value = y;
                    first_click = true;
                }
            }
        </script>
    </body>
    </html>